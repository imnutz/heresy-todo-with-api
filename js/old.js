!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=e.apply(n,r);function c(e){t(a,o,i,c,u,"next",e)}function u(e){t(a,o,i,c,u,"throw",e)}c(void 0)}))}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}
/*! (c) Andrea Giammarchi - ISC */()}function v(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y={};try{y.WeakMap=WeakMap}catch(e){y.WeakMap=function(e,t){var n=t.defineProperty,r=t.hasOwnProperty,o=i.prototype;return o.delete=function(e){return this.has(e)&&delete e[this._]},o.get=function(e){return this.has(e)?e[this._]:void 0},o.has=function(e){return r.call(e,this._)},o.set=function(e,t){return n(e,this._,{configurable:!0,value:t}),this},i;function i(t){n(this,"_",{value:"_@ungap/weakmap"+e++}),t&&t.forEach(a,this)}function a(e){this.set(e[0],e[1])}}(Math.random(),Object)}var b=y.WeakMap;
/*! (c) Andrea Giammarchi - ISC */
var w={};try{w.Event=new Event(".").constructor}catch(e){try{w.Event=new CustomEvent(".").constructor}catch(e){w.Event=function(e,t){t||(t={});var n=document.createEvent("Event"),r=!!t.bubbles,o=!!t.cancelable;n.initEvent(e,r,o);try{n.bubbles=r,n.cancelable=o}catch(n){}return n}}}var _=w.Event,A={};
/*! (c) Andrea Giammarchi - ISC */try{A.WeakSet=WeakSet}catch(e){!function(e){var t=new e,n=r.prototype;function r(n){t.set(this,new e),n&&n.forEach(this.add,this)}n.add=function(e){return t.get(this).set(e,1),this},n.delete=function(e){return t.get(this).delete(e)},n.has=function(e){return t.get(this).has(e)},A.WeakSet=r}(WeakMap)}var k=A.WeakSet,x="object"!==("undefined"==typeof document?"undefined":e(document)),O=function(e){var t,n=(t=(document.defaultView.navigator||{}).userAgent,/(Firefox|Safari)\/(\d+)/.test(t)&&!/(Chrom[eium]+|Android)\/(\d+)/.test(t)),r=!("raw"in e)||e.propertyIsEnumerable("raw")||!Object.isFrozen(e.raw);if(n||r){var o={},i=function(e){for(var t=".",n=0;n<e.length;n++)t+=e[n].length+"."+e[n];return o[t]||(o[t]=e)};if(r)O=i;else{var a=new b;O=function(e){return a.get(e)||function(e,t){return a.set(e,t),t}(e,i(e))}}}else x=!0;return E(e)};function E(e){return x?e:O(e)}
/*! (c) Andrea Giammarchi - ISC */var N,j="-"+Math.random().toFixed(6)+"%",C=!1;try{"content"in(N=document.createElement("template"))&&(N.innerHTML='<p tabindex="'+j+'"></p>',N.content.childNodes[0].getAttribute("tabindex")==j)||(j="_dt: "+j.slice(1,-1)+";",C=!0)}catch(e){}var S="\x3c!--"+j+"--\x3e",T=/^(?:style|textarea)$/i,I=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;
/*! (c) Andrea Giammarchi - ISC */
function P(e){return e.join(S).replace(F,W).replace(z,q)}var R=" \\f\\n\\r\\t",D="[^"+R+"\\/>\"'=]+",M="["+R+"]+"+D,L="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",$="(?:\\s*=\\s*(?:'[^']*?'|\"[^\"]*?\"|<[^>]*?>|"+D.replace("\\/","")+"))?)",z=new RegExp(L+M+$+"+)(["+R+"]*/?>)","g"),F=new RegExp(L+M+$+"*)(["+R+"]*/>)","g"),Z=new RegExp("("+M+"\\s*=\\s*)(['\"]?)"+S+"\\2","gi");function q(e,t,n,r){return"<"+t+n.replace(Z,B)+r}function B(e,t,n){return t+(n||'"')+j+(n||'"')}function W(e,t,n){return I.test(t)?e:"<"+t+n+"></"+t+">"}function V(e){for(var t=arguments.length,n=[E(e)],r=1;r<t;)n.push(arguments[r++]);return n}
/*! (c) Andrea Giammarchi - ISC */var H=function(e,t){return(t=n.prototype).ELEMENT_NODE=1,t.nodeType=111,t.remove=function(e){var t=this.childNodes,n=this.firstChild,r=this.lastChild;if(this._=null,e&&2===t.length)r.parentNode.removeChild(r);else{var o=this.ownerDocument.createRange();o.setStartBefore(e?t[1]:n),o.setEndAfter(r),o.deleteContents()}return n},t.valueOf=function(e){var t=this._,n=null==t;if(n&&(t=this._=this.ownerDocument.createDocumentFragment()),n||e)for(var r=this.childNodes,o=0,i=r.length;o<i;o++)t.appendChild(r[o]);return t},n;function n(t){var n=this.childNodes=e.call(t,0);this.firstChild=n[0],this.lastChild=n[n.length-1],this.ownerDocument=n[0].ownerDocument,this._=null}}([].slice),J=Array.isArray,G=H.prototype.nodeType;function Q(e,t){this.type=e,this.args=t}
/*! (c) Andrea Giammarchi - ISC */Object.freeze(Q);var U=function(e){var t="content"in r("template")?function(e){var t=r("template");return t.innerHTML=e,t.content}:function(e){var t=r("fragment"),o=r("template"),i=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(e)){var a=RegExp.$1;o.innerHTML="<table>"+e+"</table>",i=o.querySelectorAll(a)}else o.innerHTML=e,i=o.childNodes;return n(t,i),t};return function(e,n){return("svg"===n?o:t)(e)};function n(e,t){for(var n=t.length;n--;)e.appendChild(t[0])}function r(t){return"fragment"===t?e.createDocumentFragment():e.createElementNS("http://www.w3.org/1999/xhtml",t)}function o(e){var t=r("fragment"),o=r("div");return o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e+"</svg>",n(t,o.firstChild.childNodes),t}}(document),K=[].indexOf,X=function(e,t,n,r,o,i){for(var a=("selectedIndex"in t),c=a;r<o;){var u=e(n[r],1);if(t.insertBefore(u,i),a&&c&&u.selected){c=!c;var s=t.selectedIndex;t.selectedIndex=s<0?r:K.call(t.querySelectorAll("option"),u)}r++}},Y=function(e,t){return e==t},ee=function(e){return e},te=function(e,t,n,r,o,i,a){var c=i-o;if(c<1)return-1;for(;n-t>=c;){for(var u=t,s=o;u<n&&s<i&&a(e[u],r[s]);)u++,s++;if(s===i)return t;t=u+1}return-1},ne=function(e,t,n,r,o){return n<r?e(t[n],0):0<n?e(t[n-1],-0).nextSibling:o},re=function(e,t,n,r){for(;n<r;)ae(e(t[n++],-1))},oe=function(e,t,n){for(var r=1,o=t;r<o;){var i=(r+o)/2>>>0;n<e[i]?o=i:r=i+1}return r},ie=function(e,t,n,r,o,i,a,c,u,s,l,f,d){!function(e,t,n,r,o,i,a,c,u){for(var s=[],l=e.length,f=a,d=0;d<l;)switch(e[d++]){case 0:o++,f++;break;case 1:s.push(r[o]),X(t,n,r,o++,o,f<c?t(i[f],0):u);break;case-1:f++}for(d=0;d<l;)switch(e[d++]){case 0:a++;break;case-1:-1<s.indexOf(i[a])?a++:re(t,i,a++,a)}}(function(e,t,n,r,o,i,a){var c,u,s,l,f,d,h,p=n+i,v=[];e:for(c=0;c<=p;c++){if(c>50)return null;for(h=c-1,f=c?v[c-1]:[0,0],d=v[c]=[],u=-c;u<=c;u+=2){for(s=(l=u===-c||u!==c&&f[h+u-1]<f[h+u+1]?f[h+u+1]:f[h+u-1]+1)-u;l<i&&s<n&&a(r[o+l],e[t+s]);)l++,s++;if(l===i&&s===n)break e;d[c+u]=l}}var m=Array(c/2+p/2),g=m.length-1;for(c=v.length-1;c>=0;c--){for(;l>0&&s>0&&a(r[o+l-1],e[t+s-1]);)m[g--]=0,l--,s--;if(!c)break;h=c-1,f=c?v[c-1]:[0,0],(u=l-s)===-c||u!==c&&f[h+u-1]<f[h+u+1]?(s--,m[g--]=1):(l--,m[g--]=-1)}return m}(n,r,i,a,c,s,f)||function(e,t,n,r,o,i,a,c){var u=0,s=r<c?r:c,l=Array(s++),f=Array(s);f[0]=-1;for(var d=1;d<s;d++)f[d]=a;for(var h=o.slice(i,a),p=t;p<n;p++){var v=h.indexOf(e[p]);if(-1<v){var m=v+i;-1<(u=oe(f,s,m))&&(f[u]=m,l[u]={newi:p,oldi:m,prev:l[u-1]})}}for(u=--s,--a;f[u]>a;)--u;s=c+r-u;var g=Array(s),y=l[u];for(--n;y;){for(var b=y,w=b.newi,_=b.oldi;n>w;)g[--s]=1,--n;for(;a>_;)g[--s]=-1,--a;g[--s]=0,--n,--a,y=y.prev}for(;n>=t;)g[--s]=1,--n;for(;a>=i;)g[--s]=-1,--a;return g}(n,r,o,i,a,c,u,s),e,t,n,r,a,c,l,d)},ae=function(e){return(e.remove||ce).call(e)};function ce(){var e=this.parentNode;e&&e.removeChild(this)}
/*! (c) 2018 Andrea Giammarchi (ISC) */var ue=function(e,t,n,r){r||(r={});for(var o=r.compare||Y,i=r.node||ee,a=null==r.before?null:i(r.before,0),c=t.length,u=c,s=0,l=n.length,f=0;s<u&&f<l&&o(t[s],n[f]);)s++,f++;for(;s<u&&f<l&&o(t[u-1],n[l-1]);)u--,l--;var d=s===u,h=f===l;if(d&&h)return n;if(d&&f<l)return X(i,e,n,f,l,ne(i,t,s,c,a)),n;if(h&&s<u)return re(i,t,s,u),n;var p=u-s,v=l-f,m=-1;if(p<v){if(-1<(m=te(n,f,l,t,s,u,o)))return X(i,e,n,f,m,i(t[s],0)),X(i,e,n,m+p,l,ne(i,t,u,c,a)),n}else if(v<p&&-1<(m=te(t,s,u,n,f,l,o)))return re(i,t,s,m),re(i,t,m+v,u),n;return p<2||v<2?(X(i,e,n,f,l,i(t[s],0)),re(i,t,s,u),n):p===v&&function(e,t,n,r,o,i){for(;r<o&&i(n[r],e[t-1]);)r++,t--;return 0===t}(n,l,t,s,u,o)?(X(i,e,n,f,l,ne(i,t,u,c,a)),n):(ie(i,e,n,f,l,v,t,s,u,p,c,o,a),n)},se=function(e,t,n,r,o){var i="importNode"in e,a=e.createDocumentFragment();return a.appendChild(e.createTextNode("g")),a.appendChild(e.createTextNode("")),(i?e.importNode(a,!0):a.cloneNode(!0)).childNodes.length<2?function e(t,n){for(var r=t.cloneNode(),o=t.childNodes||[],i=o.length,a=0;n&&a<i;a++)r.appendChild(e(o[a],n));return r}:i?e.importNode:function(e,t){return e.cloneNode(!!t)}}(document),le="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},fe={};
/*! (c) Andrea Giammarchi - ISC */try{fe.Map=Map}catch(e){fe.Map=function(){var e=0,t=[],n=[];return{delete:function(o){var i=r(o);return i&&(t.splice(e,1),n.splice(e,1)),i},forEach:function(e,r){t.forEach((function(t,o){e.call(r,n[o],t,this)}),this)},get:function(t){return r(t)?n[e]:void 0},has:function(e){return r(e)},set:function(o,i){return n[r(o)?e:t.push(o)-1]=i,this}};function r(n){return-1<(e=t.indexOf(n))}}}var de=fe.Map,he=C?function(e,t){var n=t.join(" ");return t.slice.call(e,0).sort((function(e,t){return n.indexOf(e.name)<=n.indexOf(t.name)?-1:1}))}:function(e,t){return t.slice.call(e,0)};function pe(e,t){for(var n=t.length,r=0;r<n;)e=e.childNodes[t[r++]];return e}function ve(e,t,n,r){for(var o=new de,i=e.attributes,a=[],c=he(i,n),u=c.length,s=0;s<u;){var l,f=c[s++],d=f.value===j;if(d||1<(l=f.value.split(S)).length){var h=f.name;if(!o.has(h)){var p=n.shift().replace(d?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+h+")\\s*=\\s*('|\")[\\S\\s]*","i"),"$1"),v=i[p]||i[p.toLowerCase()];if(o.set(h,v),d)t.push(ge(v,r,p,null));else{for(var m=l.length-2;m--;)n.shift();t.push(ge(v,r,p,l))}}a.push(f)}}s=0;for(var g=(0<(u=a.length)&&C&&!("ownerSVGElement"in e));s<u;){var y=a[s++];g&&(y.value=""),e.removeAttribute(y.name)}var b=e.nodeName;if(/^script$/i.test(b)){var w=document.createElement(b);for(u=i.length,s=0;s<u;)w.setAttributeNode(i[s++].cloneNode(!0));w.textContent=e.textContent,e.parentNode.replaceChild(w,e)}}function me(e,t){return{type:"any",node:e,path:t}}function ge(e,t,n,r){return{type:"attr",node:e,path:t,name:n,sparse:r}}function ye(e,t){return{type:"text",node:e,path:t}}var be=new b,we=new b;function _e(e,t){var n=(e.convert||P)(t),r=e.transform;r&&(n=r(n));var o=U(n,e.type);!function(e){var t=e.childNodes,n=t.length;for(;n--;){var r=t[n];1!==r.nodeType&&0===le.call(r.textContent).length&&e.removeChild(r)}}
/*! (c) Andrea Giammarchi - ISC */(o);var i=[];!function e(t,n,r,o){for(var i=t.childNodes,a=i.length,c=0;c<a;){var u=i[c];switch(u.nodeType){case 1:var s=o.concat(c);ve(u,n,r,s),e(u,n,r,s);break;case 8:var l=u.textContent;if(l===j)r.shift(),n.push(T.test(t.nodeName)?ye(t,o):me(u,o.concat(c)));else switch(l.slice(0,2)){case"/*":if("*/"!==l.slice(-2))break;case"ðŸ‘»":t.removeChild(u),c--,a--}break;case 3:T.test(t.nodeName)&&le.call(u.textContent)===S&&(r.shift(),n.push(ye(t,o)))}c++}}(o,i,t.slice(0),[]);var a={content:o,updates:function(n){for(var r=[],o=i.length,a=0,c=0;a<o;){var u=i[a++],s=pe(n,u.path);switch(u.type){case"any":r.push({fn:e.any(s,[]),sparse:!1});break;case"attr":var l=u.sparse,f=e.attribute(s,u.name,u.node);null===l?r.push({fn:f,sparse:!1}):(c+=l.length-2,r.push({fn:f,sparse:!0,values:l}));break;case"text":r.push({fn:e.text(s),sparse:!1}),s.textContent=""}}return o+=c,function(){var e=arguments.length;if(o!==e-1)throw new Error(e-1+" values instead of "+o+"\n"+t.join("${value}"));for(var i=1,a=1;i<e;){var c=r[i-a];if(c.sparse){var u=c.values,s=u[0],l=1,f=u.length;for(a+=f-2;l<f;)s+=arguments[i++]+u[l++];c.fn(s)}else c.fn(arguments[i++])}return n}}};return be.set(t,a),a}function Ae(e,t){var n=be.get(t)||_e(e,t),r=se.call(document,n.content,!0),o={content:r,template:t,updates:n.updates(r)};return we.set(e,o),o}var ke=function(){var t=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,n=/([^A-Z])([A-Z]+)/g;return function(e,t){return"ownerSVGElement"in e?function(e,t){var n;t?n=t.cloneNode(!0):(e.setAttribute("style","--hyper:style;"),n=e.getAttributeNode("style"));return n.value="",e.setAttributeNode(n),o(n,!0)}(e,t):o(e.style,!1)};function r(e,t,n){return t+"-"+n.toLowerCase()}function o(o,i){var a,c;return function(u){var s,l,f,d;switch(e(u)){case"object":if(u){if("object"===a){if(!i&&c!==u)for(l in c)l in u||(o[l]="")}else i?o.value="":o.cssText="";for(l in s=i?{}:o,u)f="number"!=typeof(d=u[l])||t.test(l)?d:d+"px",!i&&/^--/.test(l)?s.setProperty(l,f):s[l]=f;a="object",i?o.value=function(e){var t,o=[];for(t in e)o.push(t.replace(n,r),":",e[t],";");return o.join("")}(c=s):c=u;break}default:c!=u&&(a="string",c=u,i?o.value=u||"":o.cssText=u||"")}}}}(),xe=function(e,t){return e.nodeType===G?1/t<0?t?e.remove(!0):e.lastChild:t?e.valueOf(!0):e.firstChild:e},Oe=function(e,t){var n,r=!1,o=t.cloneNode(!0);return function(t){n!==t&&(n=t,o.value!==t&&(null==t?(r&&(r=!1,e.removeAttributeNode(o)),o.value=t):(o.value=t,r||(r=!0,e.setAttributeNode(o)))))}},Ee=function(e,t){var n;return function(r){n!==r&&(n=r,e[t]!==r&&(null==r?(e[t]="",e.removeAttribute(t)):e[t]=r))}},Ne=/^(?:form|list)$/i,je=[].slice,Ce=function(e,t){return e.ownerDocument.createTextNode(t)};function Se(e){return this.type=e,t=this,function(e){var n=we.get(t);return null!=n&&n.template===e||(n=Ae(t,e)),n.updates.apply(null,arguments),n.content};var t}function Te(e){return e(this)}Se.prototype={attribute:function(e,t,n){switch(t){case"class":if("ownerSVGElement"in e)return Oe(e,n);t="className";case"data":case"props":return Ee(e,t);case"style":return ke(e,n,"ownerSVGElement"in e);case"ref":return function(e){return function(t){t.current=e}}(e);default:return"."===t.slice(0,1)?function(e,t,n){return n?function(n){try{e[t]=n}catch(r){e.setAttribute(t,n)}}:function(n){e[t]=n}}(e,t.slice(1),"ownerSVGElement"in e):"on"===t.slice(0,2)?function(e,t){var n,r=t.slice(2);return t.toLowerCase()in e&&(r=r.toLowerCase()),function(t){n!==t&&(n&&e.removeEventListener(r,n,!1),n=t,t&&e.addEventListener(r,t,!1))}}(e,t):!(t in e)||"ownerSVGElement"in e||Ne.test(t)?Oe(e,n):Ee(e,t)}},any:function(t,n){var r,o={node:xe,before:t},i="ownerSVGElement"in t?"svg":"html",a=!1;return function c(u){switch(e(u)){case"string":case"number":case"boolean":a?r!==u&&(r=u,n[0].textContent=u):(a=!0,r=u,n=ue(t.parentNode,n,[Ce(t,u)],o));break;case"function":c(u(t));break;case"object":case"undefined":if(null==u){a=!1,n=ue(t.parentNode,n,[],o);break}default:if(a=!1,r=u,J(u))if(0===u.length)n.length&&(n=ue(t.parentNode,n,[],o));else switch(e(u[0])){case"string":case"number":case"boolean":c(String(u));break;case"function":c(u.map(Te,t));break;case"object":J(u[0])&&(u=u.concat.apply([],u));default:n=ue(t.parentNode,n,u,o)}else!function(e){return"ELEMENT_NODE"in e}(u)?"text"in u?c(String(u.text)):"any"in u?c(u.any):"html"in u?n=ue(t.parentNode,n,je.call(U([].concat(u.html).join(""),i).childNodes),o):"length"in u&&c(je.call(u)):n=ue(t.parentNode,n,11===u.nodeType?je.call(u.childNodes):[u],o)}}},text:function(t){var n;return function r(o){if(n!==o){n=o;var i=e(o);"object"===i&&o?"text"in o?r(String(o.text)):"any"in o?r(o.any):"html"in o?r([].concat(o.html).join("")):"length"in o&&r(je.call(o).join("")):"function"===i?r(o(t)):t.textContent=null==o?"":o}}}};var Ie=Object.create,Pe=Object.keys,Re=new b,De=new b,Me=Se.prototype,Le=null,$e=function(e){var t=qe("html",e),n=qe("svg",e),r={html:Ze("html",e,!0),svg:Ze("svg",e,!0)};return{html:t,svg:n,inner:r,hook:function(e){return{html:Fe(e,t),svg:Fe(e,n),inner:r}},render:function(t,n){var r=Be.call(this,t,n,e);return De.get(t)!==r&&(De.set(t,r),function(e,t){e.textContent="",e.appendChild(t)}(t,r)),t}}};$e(Se);function ze(e,t){return e.nodeType===G?e.valueOf(t):e}function Fe(e,t){return function(){var n=e(null);return null===n.current&&(n.current=t.for(n)),ze(n.current.apply(null,arguments),!1)}}function Ze(e,t,n){return function(){var r=V.apply(null,arguments);return n||Le?new Q(e,r):new t(e).apply(null,r)}}function qe(e,t){var n=new b,r=Ze(e,t,!1);return r.for=function(r,o){var i=n.get(r)||function(e){var t={$:null};return n.set(e,t),t}(r);return null==o&&(o="$"),i[o]||function(n,r){var o=[],i=null,a=new t(e),c=function(){return a.apply(null,Ve(o,1,1,t))};return n[r]=function(){o=V.apply(null,arguments);var e=Be(a,c,t);return i||(i=He(e))}}(i,o)},r}function Be(e,t,n){var r=Le;(Le=Re.get(e)||function(e){var t={i:0,length:0,stack:[],update:!1};return Re.set(e,t),t}(e)).i=0;var o,i=t.call(this);if(i instanceof Q){o=ze(We(i,0,n),Le.update);var a=Le,c=a.i,u=a.length,s=a.stack,l=a.update;c<u&&s.splice(Le.length=c),l&&(Le.update=!1)}else o=ze(i,!1);return Le=r,o}function We(e,t,n){var r=Le,o=r.i,i=r.length,a=r.stack,c=e.type,u=e.args,s=o<i;Le.i++,s||(Le.length=a.push({l:t,kind:c,tag:null,tpl:u[0],wire:null})),Ve(u,1,t+1,n);var l=a[o];if(s){var f=l.l,d=l.kind,h=l.tag,p=l.tpl,v=l.wire;if(f===t&&c===d&&p===u[0])return h.apply(null,u),v}var m=new n(c),g=He(m.apply(null,u));return l.l=t,l.kind=c,l.tag=m,l.tpl=u[0],l.wire=g,o<1&&(Le.update=!0),g}function Ve(t,n,r,o){for(var i=t.length;n<i;n++){var a=t[n];"object"===e(a)&&a&&(a instanceof Q?t[n]=We(a,r-1,o):J(a)&&(t[n]=Ve(a,0,r++,o)))}return t}function He(e){var t=e.childNodes,n=t.length;return 1===n?t[0]:n?new H(t):e}var Je=null;try{Je=new function(){}}catch(rn){}var Ge=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,e);var t,n=(t=o,function(){var e,n=s(t);if(f()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d(this,e)});function o(){return r(this,o),n.apply(this,arguments)}return o}(e)};if(Je){var Qe=Object.getPrototypeOf,Ue=Object.setPrototypeOf,Ke=("object"===("undefined"==typeof Reflect?"undefined":e(Reflect))?Reflect:{construct:function(e,t,n){for(var r=[null],o=0;o<t.length;o++)r.push(t[o]);var i=e.bind.apply(e,r);return Ue(new i,n.prototype)}}).construct;Ge=function(e,t){function n(){return Ke(t?Qe(e):e,arguments,n)}return Ue(n.prototype,e.prototype),Ue(n,e)}}var Xe={map:{},re:null},Ye=function(e){return new RegExp("<(/)?(".concat(e.join("|"),")([^A-Za-z0-9:._-])"),"g")},et=null,tt=function(e,t){var n=et||t,r=n.map,o=n.re;return e.replace(o,(function(e,t,n,o){var i=r[n],a=i.tagName,c=i.is;return i.element?t?"</".concat(c,">"):"<".concat(c).concat(o):t?"</".concat(a,">"):"<".concat(a,' is="').concat(c,'"').concat(o)}))},nt=function(e){var t=e.tagName,n=e.is;return e.element?n:"".concat(t,'[is="').concat(n,'"]')},rt=function(){return et},ot=function(e){et=e},it=function(e){var t=Ie(Me);return Pe(e).forEach((function(n){t[n]=e[n](t[n]||("convert"===n?P:String))})),n.prototype=t,$e(n);function n(){return Se.apply(this,arguments)}}({transform:function(e){return function(e){return tt(e,Xe)}}}),at=it.render,ct=it.html,ut=it.svg,st=Object.defineProperties,lt=new b,ft=new b,dt=new b,ht=new k,pt="attributeChangedCallback",vt="connectedCallback",mt="dis".concat(vt),gt=function(e,t,n){if(n in e){var r=e[n];t[n]={configurable:!0,value:function(){return St.call(this),r.apply(this,arguments)}}}else t[n]={configurable:!0,value:St}},yt=function(e){var t=e.prototype,n=[],r={html:{configurable:!0,get:Nt},svg:{configurable:!0,get:jt}};r["_ðŸ”¥"]={value:{events:n,info:null}},"handleEvent"in t||(r.handleEvent={configurable:!0,value:Ct}),"oninit"in t&&(n.push("init"),gt(t,r,"render")),gt(t,r,pt),gt(t,r,vt),gt(t,r,mt),[[pt,"onattributechanged",Tt],[vt,"onconnected",It],[mt,"ondisconnected",Rt],[vt,"render",Pt]].forEach((function(e){var o=p(e,3),i=o[0],a=o[1],c=o[2];if(!(i in t)&&a in t)if("render"!==a&&n.push(a.slice(2)),i in r){var u=r[i].value;r[i]={configurable:!0,value:function(){return u.apply(this,arguments),c.apply(this,arguments)}}}else r[i]={configurable:!0,value:c}}));var o=e.booleanAttributes||[];o.forEach((function(e){e in t||(r[e]={configurable:!0,get:function(){return this.hasAttribute(e)},set:function(t){t&&"false"!==t?this.setAttribute(e,t):this.removeAttribute(e)}})}));var i=e.observedAttributes||[];i.forEach((function(e){e in t||(r[e]={configurable:!0,get:function(){return this.getAttribute(e)},set:function(t){null==t?this.removeAttribute(e):this.setAttribute(e,t)}})})),(e.mappedAttributes||[]).forEach((function(e){var o=new b,i="on"+e in t;i&&n.push(e),r[e]={configurable:!0,get:function(){return o.get(this)},set:function(t){if(o.set(this,t),i){var n=bt(e);n.detail=t,ht.has(this)?this.dispatchEvent(n):(dt.has(this)||dt.set(this,[]),dt.get(this).push(n))}}}})),st(t,r);var a=o.concat(i);return a.length?st(e,{observedAttributes:{configurable:!0,get:function(){return a}}}):e},bt=function(e){return new _(e)},wt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Q("html",t)};wt.for=ct.for;var _t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Q("svg",t)};_t.for=ut.for;var At=function(e,t,n){var r=n.info,o=r?tt(t.join("_ðŸ”¥"),r).split("_ðŸ”¥"):t;return e.set(t,o),o},kt=function(e,t,n){var r=xt(e,t,new b);return n.set(e,r),r},xt=function(e,t,n){return function(r){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var c=E(r),u=n.get(c)||At(n,c,e["_ðŸ”¥"]);return at(e,(function(){return t.apply(void 0,[u].concat(i))}))}};function Ot(e){this.addEventListener(e,this)}function Et(e){this.dispatchEvent(e)}function Nt(){return lt.get(this)||kt(this,wt,lt)}function jt(){return ft.get(this)||kt(this,_t,ft)}function Ct(e){this["on".concat(e.type)](e)}function St(){if(!ht.has(this)){ht.add(this),this["_ðŸ”¥"].events.forEach(Ot,this),this.dispatchEvent(bt("init"));var e=dt.get(this);e&&(dt.delete(this),e.forEach(Et,this))}}function Tt(e,t,n){var r=bt("attributechanged");r.attributeName=e,r.oldValue=t,r.newValue=n,this.dispatchEvent(r)}function It(){this.dispatchEvent(bt("connected"))}function Pt(){this.render()}function Rt(){this.dispatchEvent(bt("disconnected"))}var Dt=Object.create,Mt=Object.defineProperty,Lt=Object.defineProperties,$t=Object.getOwnPropertyNames,zt=Object.getOwnPropertySymbols,Ft=Object.getOwnPropertyDescriptor,Zt=Object.keys,qt={element:HTMLElement},Bt=new b,Wt=new b,Vt=function(e){var t=Dt(null),n=Dt(null),r={prototype:n,statics:t};return $t(e).concat(zt(e)).forEach((function(r){var o=Ft(e,r);switch(o.enumerable=!1,r){case"extends":r="tagName";case"contains":case"includes":case"name":case"booleanAttributes":case"mappedAttributes":case"observedAttributes":case"style":case"tagName":t[r]=o;break;default:n[r]=o}})),r},Ht=function(e,t){return e?e[t]||(e[t]={current:null}):{current:null}},Jt=function(t,n,r){var o;if(!/^([A-Z][A-Za-z0-9_]*)(<([A-Za-z0-9:._-]+)>|:([A-Za-z0-9:._-]+))?$/.test(t))throw"Invalid name";var i=RegExp.$1,a=RegExp.$3,c=RegExp.$4,u=a||c||n.tagName||n.extends||"element";if(!/^[A-Za-z0-9:._-]+$/.test(u))throw"Invalid tag";var s,l="",f="";u.indexOf("-")<0?(l=i.replace(/([A-Z])([A-Z][a-z])/g,s="$1"+(s||"-")+"$2").replace(/([a-z])([A-Z])/g,s).toLowerCase()+r).indexOf("-")<0&&(f="-heresy"):(l=u+r,u="element");var d=l+f;if(customElements.get(d))throw"Duplicated ".concat(d," definition");var h=Ge("object"===e(n)?Wt.get(n)||function(e,t){var n=Vt(e),r=n.statics,o=n.prototype,i=Ge(qt[t]||(qt[t]=document.createElement(t).constructor),!1);return Lt(i.prototype,o),Lt(i,r),Wt.set(e,yt(i)),i}(n,u):Bt.get(n)||function(e){var t=Ge(e,!1);return Bt.set(e,yt(t)),t}(n),!0),p="element"===u;if(Mt(h,"new",{value:p?function(){return document.createElement(d)}:function(){return document.createElement(u,{is:d})}}),Mt(h.prototype,"is",{value:d}),""===r){var v=function(e){for(var t=e.length,n=0,r=0;r<t;)n=(n<<5)-n+e.charCodeAt(r++),n&=n;return n.toString(36)}(l.toUpperCase());Xe.map[i]=Gt(h,u,d,{id:v,i:0}),Xe.re=Ye(Zt(Xe.map))}var m=[d,h];return p||m.push({extends:u}),(o=customElements).define.apply(o,m),{Class:h,is:d,name:i,tagName:u}},Gt=function e(t,n,r,o){var i=t.prototype,a=function(e,t){return{tagName:e,is:t,element:"element"===e}}(n,r),c=[nt(a)],u=t.includes||t.contains;if(u){var s={};Zt(u).forEach((function(t){var n="-".concat(o.id,"-").concat(o.i++),r=Jt(t,u[t],n),i=r.Class,a=r.is,l=r.name,f=r.tagName;c.push(nt(s[l]=e(i,f,a,o)))}));var l=Ye(Zt(s)),f={events:i["_ðŸ”¥"].events,info:{map:s,re:l}};if(Mt(i,"_ðŸ”¥",{value:f}),"render"in i){var d=i.render,h=f.info;Mt(i,"render",{value:function(){var e=rt();ot(h);var t=d.apply(this,arguments);return ot(e),t}})}}return"style"in t&&function(e){if((e||"").length){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e));var n=document.head||document.querySelector("head");n.insertBefore(t,n.lastChild)}}(t.style.apply(t,c)),a};function Qt(){var e=h(['\n      <h1>todos</h1>\n      <input class="new-todo" placeholder="What needs to be done?" autofocus>\n    ']);return Qt=function(){return e},e}function Ut(){var e=h(['\n    <div class="view">\n      <input\n        class="toggle" type="checkbox"\n        checked=',"\n      >\n      <label>",'</label>\n      <button class="destroy" onclick=',"></button>\n    </div>"]);return Ut=function(){return e},e}function Kt(){var e=h(["<Item ondelete="," .value=","/>"]);return Kt=function(){return e},e}function Xt(){var e=h(["",""]);return Xt=function(){return e},e}function Yt(){var e=h(['\n      <input id="toggle-all" class="toggle-all" type="checkbox" checked=','>\n      <label for="toggle-all">Mark all as complete</label>\n      <List\n        class="todo-list"\n        ref=',"\n        .items=","\n      />\n    "]);return Yt=function(){return e},e}function en(){var e=h(['\n      <span class="todo-count">','</span>\n      <ul class="filters">\n        <li>\n          <a href="#/" class="all selected">All</a>\n        </li>\n        <li>\n          <a href="#/active" class="active">Active</a>\n        </li>\n        <li>\n          <a href="#/completed" class="completed">Completed</a>\n        </li>\n      </ul>\n      <button class="clear-completed">Clear completed</button>\n    ']);return en=function(){return e},e}function tn(){var e=h(['\n      <Header class="header" ref='," onchange=",' />\n      <Main class="main" ref='," onchange="," ondelete="," .data=",'/>\n      <Footer class="footer" ref='," count="," onclick=","/>\n    "]);return tn=function(){return e},e}var nn={extends:"section",includes:{Header:{extends:"header",render:function(){this.html(Qt())}},Main:{extends:"section",includes:{List:{extends:"ul",includes:{Item:{extends:"li",mappedAttributes:["value"],onvalue:function(){this.render()},onclick:function(e){e.stopPropagation(),this.dispatchEvent(new CustomEvent("delete",{bubbles:!0,detail:{id:this.value.id}}))},render:function(){var e=this.value,t=e.completed,n=e.title;this.classList.toggle("completed",t),this.html(Ut(),t,n,this)}}},mappedAttributes:["items"],onitems:function(){this.render()},render:function(){var e=this,t=this.items;this.html(Xt(),Object.keys(t).map((function(n){return wt(Kt(),e,t[n])})))},ondelete:function(e){}}},mappedAttributes:["data"],ondata:function(){this.render()},getActiveItems:function(){var e=this.data.items;return Object.keys(e).reduce((function(t,n){return e[n].completed||(t[n]=e[n]),t}),{})},getCompletedItems:function(){var e=this.data.items;return Object.keys(e).reduce((function(t,n){return e[n].completed&&(t[n]=e[n]),t}),{})},isAllDone:function(){return Object.keys(this.getCompletedItems()).length===Object.keys(this.data.items).length},render:function(){var e=this.data,t=e.displayActive,n=e.displayCompleted,r=e.displayAll,o={},i=this.isAllDone();t?o=this.getActiveItems():n?o=this.getCompletedItems():r&&(o=this.data.items),this.html(Yt(),i,Ht(this,"list"),o)}},Footer:{extends:"footer",mappedAttributes:["count"],oncount:function(){this.render()},render:function(){this.html(en(),this.count)}}},mappedAttributes:["data"],ondata:function(){this.render()},style:function(e){return"\n    ".concat(e," ul.completed > li:not(.completed),\n    ").concat(e," ul.active > li.completed {\n      display: none;\n    }\n  ")},oninit:function(){this.header=Ht(),this.main=Ht(),this.footer=Ht()},render:function(){var e,t=(e=this.data.items,Object.keys(e).filter((function(t){return!e[t].completed})).length);this.html(tn(),this.header,this,this.main,this,this,this.data,this.footer,t,this)},onchange:function(e){var t=e.currentTarget,n=e.target;switch(t){case this.header.current:var r=n.value.trim();this.intents.createTodo(r),n.value="";break;case this.main.current:if("toggle-all"===n.className)this.intents.markAllDone(n.checked);else{var o=n.closest("li").value;this.intents.markDone(o.id,n.checked)}}},ondelete:function(e){var t=e.detail.id;this.intents.deleteTodo(t)},onclick:function(e){var t=e.currentTarget,n=e.target;switch(t){case this.footer.current:"clear-completed"===n.className?this.intents.clearCompleted():n.hash&&!n.classList.contains("selected")&&(t.querySelector("a.selected").classList.remove("selected"),n.classList.add("selected"),n.classList.contains("active")?this.intents.showActive():n.classList.contains("completed")?this.intents.showCompleted():n.classList.contains("all")&&this.intents.showAll())}}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var rn,on,an=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(t,o){t.exports=function(){var t=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&"object"===e(t)?t:n},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&Array.isArray(e)?e:t},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number.isNaN(e)?t:e},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 0===e||Number.isNaN(e)?0===t?1:t:e},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};return e||t},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e[0]},l=function(e,t){return e||t},f=function(e,t){return e&&t},d=function(e,t){return function(n){return e(t(n))}},h=function e(t){return Array.isArray(t)?t.map(e).reduce(f,!0):!0===t||null!=t},m=function(t,n){return h(t)&&h(n)?function(t,n){switch(e(t)){case"string":return"string"==typeof n&&t.includes(n);case"object":return Array.isArray(t)?t.includes(n):"string"==typeof n&&h(t[n])}return t===n}(t,n):h(t)},g=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return h(e)&&n&&t(e),b(h(e))},y=function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return h(t)&&r&&n(t),{on:e}},b=function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{oneOf:t?function(){return e()}:g}},w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.currentIndex=0,this.history=t,this.max=n.max}return i(e,[{key:"snap",value:function(e,t){var n=function e(t){var n=t.__components;delete t.__components;var r=JSON.parse(JSON.stringify(t));return n&&(r.__components=[],n.length>0&&n.forEach((function(t){delete t.parent,r.__components.push(Object.assign(e(t),{parent:r}))}))),r}(e);return t?this.history[t]=n:(this.history.push(n),this.max&&this.history.length>this.max&&this.history.shift()),e}},{key:"travel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentIndex=e,this.history[e]}},{key:"next",value:function(){return this.history[this.currentIndex++]}},{key:"hasNext",value:function(){return m(this.history[this.currentIndex])}},{key:"last",value:function(){return this.currentIndex=this.history.length-1,this.history[this.currentIndex]}}]),e}(),_={},A={on:function(e,t){m(_[e])||(_[e]=[]),_[e].push(t)},off:function(e,t){o(_[e]).forEach((function(n,r){n===t&&_[e].splice(r,1)}))},emit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;Array.isArray(e)?e.forEach((function(e){return o(_[e]).forEach((function(e){return e(t)}))})):o(_[e]).forEach((function(e){return e(t)}))}},k=function(){function e(t){r(this,e),this.__components={},this.__behavior=[],this.__name=t,this.__lastProposalTimestamp=0,this.__allowedActions=[],this.__eventQueue=[]}return i(e,[{key:"localState",value:function(e){return m(e)?this.__components[e]:{}}},{key:"hasError",value:function(){return m(this.__error)}},{key:"error",value:function(){return this.__error||void 0}},{key:"errorMessage",value:function(){return t(this.__error).message}},{key:"clearError",value:function(){return delete this.__error}},{key:"allowedActions",value:function(){return this.__allowedActions}},{key:"clearAllowedActions",value:function(){this.__allowedActions=[]}},{key:"addAllowedActions",value:function(e){this.__allowedActions.push(e)}},{key:"resetBehavior",value:function(){this.__behavior=[]}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,e)}},{key:"setComponentState",value:function(e){this.__components[e.name]=Object.assign(t(e.localState),{parent:this}),e.localState=e.localState||this.__components[e.name]}},{key:"hasNext",value:function(e){return m(e)&&(this.__hasNext=e),this.__hasNext}},{key:"continue",value:function(){return!0===this.__continue}},{key:"renderNextTime",value:function(){delete this.__continue}},{key:"doNotRender",value:function(){this.__continue=!0}},{key:"setLogger",value:function(e){this.__logger=e}},{key:"log",value:function(e){var t=e.trace,n=e.info,r=e.warning,o=e.error,i=e.fatal;this.logger&&g(t,this.logger.trace(t)).oneOf(n,this.logger.info(n)).oneOf(r,this.logger.waring(r)).oneOf(o,this.logger.error(r)).oneOf(i,this.logger.fatal(r))}},{key:"prepareEvent",value:function(e,t){this.__eventQueue.push([e,t])}},{key:"resetEventQueue",value:function(){this.__eventQueue=[]}},{key:"flush",value:function(){!1===this.continue()&&(o(this.__eventQueue).forEach((function(e){var t=p(e,2),n=t[0],r=t[1];return A.emit(n,r)})),this.__eventQueue=[])}},{key:"clone",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=t.__components;delete t.__components;var r=JSON.parse(JSON.stringify(t));return n&&(r.__components={},Object.keys(n).forEach((function(t){var o=n[t];delete o.parent,r.__components[t]=Object.assign(e.clone(o),{parent:r})}))),r}},{key:"state",value:function(e,t){var n,r=this,o=function(e){return m(r[e])?r[e]:m(r.__components[e])?r.__components[e]:r};return n=Array.isArray(e)?e.map((function(e){return o(e)})):o(e),t&&n?this.clone(n):n}}]),e}(),x=function(e,t){return t?JSON.stringify(e,null,4):JSON.stringify(e)},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.keys(e);return"".concat(n.map((function(n){return"string"!=typeof n||0===n.indexOf("__")?"":x(e[n],t)})).filter((function(e){return""!==e})).join(", "))},E=function(e){return e()},N=function(e){return function(){var t=n(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function j(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=t(i.timetravel),s=u.max,f=i.hasAsyncActions,h=void 0===f||f,g=i.instanceName,b=void 0===g?"global":g,_=i.synchronize,x=void 0!==_&&_,j=i.clone,C=void 0!==j&&j,S=(i.requestStateRepresentation,t(x)),T=S.synchronizeInterval,I=void 0===T?5:T,P=new k(b),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P;return t.map((function(t){return e.push(t(n))}))},D=[function(e){var t=e.__error;t&&(t.stack.indexOf("AssertionError")<0?P.__error=t:(console.log("--------------------------------------"),console.log(t)))}],M=[function(){P.hasNext(!!e&&e.hasNext())}],L=[],$=function(e){return e.flush()},z=function(e){return e.flush()},F=z,Z=function(){try{M.forEach(E),L.map(E).reduce(l,!1)||$(C?P.clone():P),P.renderNextTime()}catch(e){if(!(e.stack.indexOf("AssertionError")<0))throw e;setTimeout((function(){return V({__error:e})}),0)}},q=function(e){if(m(e.__name)){var t=e.__name;delete e.__name;var n=P.__formatBehavior?P.__formatBehavior(t,e,P):"".concat(t,"(").concat(O(e),") ==> ").concat(O(P));P.__behavior.push(n)}},B=function(e){if(e.__startTime){if(e.__startTime<=P.__lastProposalTimestamp)return!1;e.__startTime=P.__lastProposalTimestamp}return!0},W={_queue:[],_rendering:!1,add:function(e){this._queue.push(e)},synchronize:function(e){var t=this;return this._interval=setInterval(n(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t._rendering||!(t._queue.length>0)){n.next=8;break}return t._rendering=!0,r=t._queue.slice(0,1),o=p(r,1),i=o[0],t._queue.shift(),i.__rendering=t._rendering,n.next=7,e.apply(void 0,v(i));case 7:t._rendering=!1;case 8:case"end":return n.stop()}}),n)}))),I),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return W.add(t)}},clear:function(){clearInterval(this._interval)}},V=x?function(){var e=n(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B(t)){e.next=13;break}return P.resetEventQueue(),e.t0=Promise,e.t1=D,e.next=6,N(t);case 6:return e.t2=e.sent,e.t3=e.t1.map.call(e.t1,e.t2),e.next=10,e.t0.all.call(e.t0,e.t3);case 10:q(t),Z(),n&&n();case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}():function(e,t){B(e)&&(D.forEach(N(e)),q(e),Z(),t&&t())};x&&(V=W.synchronize(V));var H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};P.update(t),e&&e.snap(P,0),P.resetBehavior()},J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return function(n){return function(){return!!t.expression(n)&&(n.log({error:{name:t.name,model:n}}),e&&(n.update(e.last()),$(n)),!0)}}}))},G=function(e){return 0===P.allowedActions().length||P.allowedActions().map((function(t){return t===e})).reduce(l,!1)},Q=function(e){m(e.name)&&P.setComponentState(e)},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.options||{},u=i.ignoreOutdatedProposals,s=void 0!==u&&u,l=i.debounce,f=void 0===l?0:l,d=i.retry;d&&(d.max=c(d.max),d.delay=a(d.delay));var p=f;Q(e),r=h?o(e.actions).map((function(e){var r=!1,o=0,i=function(){var a=n(regeneratorRuntime.mark((function n(){var a,c,u,l,f,h=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(a=h.length,c=new Array(a),u=0;u<a;u++)c[u]=h[u];if(l=(new Date).getTime(),!G(e)){n.next=38;break}if(!(p>0&&r)){n.next=6;break}return r=!t(c[0]).__resetDebounce,n.abrupt("return");case 6:return f={},n.prev=7,n.next=10,e.apply(void 0,c);case 10:f=n.sent,n.next=24;break;case 13:if(n.prev=13,n.t0=n.catch(7),!d){n.next=19;break}return(o+=1)<d.max&&setTimeout((function(){return i.apply(void 0,c)}),d.delay),n.abrupt("return");case 19:if(!(n.t0.stack.indexOf("AssertionError")<0)){n.next=23;break}f.__error=n.t0,n.next=24;break;case 23:throw n.t0;case 24:s&&(f.__startTime=l),n.prev=25,V(f),o=0,n.next=37;break;case 30:if(n.prev=30,n.t1=n.catch(25),!(n.t1.stack.indexOf("AssertionError")<0)){n.next=36;break}V({__error:n.t1}),n.next=37;break;case 36:throw n.t1;case 37:p>0&&(r=!0,setTimeout((function(){return i({__resetDebounce:!0})}),p));case 38:case"end":return n.stop()}}),n,null,[[7,13],[25,30]])})));return function(){return a.apply(this,arguments)}}();return i})):o(e.actions).map((function(e){return function(){try{var t=e.apply(void 0,arguments);V(t)}catch(e){if(!(e.stack.indexOf("AssertionError")<0))throw e;V({__error:e})}}})),R(D,e.acceptors,e.localState),R(M,e.reactors,e.localState),R(L,J(e.safety),e.localState),R(L,e.naps,e.localState)},K=function(t){var n=function(e){e.flush&&e.flush(),t&&t(e)};$=e?d(n,(function(t){return e?e.snap(t):t})):n,z=t},X=function(e){P.setLogger(e)},Y=function(t){e=new w(t,{max:s}),P.hasNext(e.hasNext()),P.resetBehavior(),$=d(z,(function(t){return e?e.snap(t):t}))},ee=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};m(e)&&(t.reset&&(t.index=0,P.__behavior=[]),n=t.next?e.next():t.endOfTime?e.last():e.travel(t.index)),$(Object.assign(P,n))},te=function(e){var t=e.begin,n=void 0===t?{}:t,r=e.end,o=n.render;m(o)&&(F=$,$=o),m(r)&&($=F)},ne=function(e){var t=e.actions,n=void 0===t?[]:t,r=e.clear,o=void 0!==r&&r;return n.length>0?P.addAllowedActions(n):o&&P.clearAllowedActions(),P.allowedActions()},re=function(e){var t=p(e,2),n=t[0],r=t[1];return A.on(n,r)};return function(e){var t=e.initialState,n=e.component,o=e.render,i=e.history,a=e.travel,c=e.logger,u=e.check,s=e.allowed,l=e.clearInterval,f=e.event;return r=[],y(i,Y).on(t,H).on(n,U).on(o,K).on(a,ee).on(c,X).on(u,te).on(s,ne).on(l,(function(){return W.clear()})).on(f,re),{hasNext:P.hasNext(),hasError:P.hasError(),errorMessage:P.errorMessage(),error:P.error(),intents:r,state:function(e){return P.state(e,C)}}}}var C=j(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return{addInitialState:function(t){return e({initialState:t})},addComponent:function(t){return e({component:t})},setRender:function(t){if(Array.isArray(t)){var n=p(t,2),r=n[0],o=n[1];t=function(e){return r("function"==typeof o?o(e):e)}}e({render:u(t)})},addHandler:function(t,n){return e({event:[t,n]})},getIntents:function(t){return e({component:{actions:t}})},addAcceptors:function(t,n){return e({component:{acceptors:t,privateModel:n}})},addReactors:function(t,n){return e({component:{reactors:t,privateModel:n}})},addNAPs:function(t,n){return e({component:{naps:t,privateModel:n}})},addSafetyConditions:function(t,n){return e({component:{safety:t,privateModel:n}})},hasError:function(){return e({}).hasError},allow:function(t){return e({allowed:{actions:t}})},clearAllowedActions:function(){return e({allowed:{clear:!0}})},allowedActions:function(){return e({allowed:{}})},addTimeTraveler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e({history:t})},travel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e({travel:{index:t}})},next:function(){return e({travel:{next:!0}})},last:function(){return e({travel:{endOfTime:!0}})},hasNext:function(){return e({}).hasNext},reset:function(t){return e(t?{initialState:t}:{travel:{reset:!0}})},beginCheck:function(t){return e({check:{begin:{render:t}}})},endCheck:function(){return e({check:{end:!0}})}}},T=function e(t,n,r,o,i,a){var c=[];return 0===n.length?t.forEach((function(e){a.length>0?a.map((function(t){return e.name!==t})).reduce(f,!0)&&c.push([e]):c.push([e])})):n.forEach((function(e){return t.forEach((function(t){var n=e.concat([t]);i?e[e.length-1]!==t&&c.push(n):c.push(n)}))})),++r<o?e(t,c,r,o,i,a):c.filter((function(e){return e.length===o}))},I=function(e){var n=e.map((function(e){return o(t(e).values).length})),r=n.map((function(e,t){for(var r=1,o=t;o<n.length;o++)r*=n[o];return r})),i=n.reduce((function(e,t){return e*t}),1);if(0===i)throw new Error(["Checker: invalid dataset, one of the intents values has no value.","If an intent has no parameter, add an empty array to its values"].join("\n"));return{increment:function(e){return r.map((function(t,o){return o===r.length-1?e%n[o]:Math.floor(e/r[o+1])%n[o]}))},kmax:i}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;e.forEach((function(e){var r=0,o=I(e),i=o.increment,a=o.kmax,c=function(){var o=i(r++),a=e.map((function(e,t){return e.values[o[t]]}));t(),n([]),e.forEach((function(e,t){return e.intent.apply(e,v(a[t]))}))};do{c()}while(r<a)}))},R=S(),D=R.addInitialState,M=R.addComponent,L=R.setRender,$=R.addSafetyConditions,z=R.getIntents,F=R.addAcceptors,Z=R.addReactors,q=R.addNAPs;return{SAM:C,createInstance:j,api:S,addInitialState:D,addComponent:M,addAcceptors:F,addReactors:Z,addNAPs:q,addSafetyConditions:$,getIntents:z,setRender:L,step:function(){return{}},doNotRender:function(e){return function(){return!0===e.continue()}},first:s,match:function(e,t){return s(e.map((function(e,n){return e?t[n]:null})).filter(h))},on:y,oneOf:g,utils:{O:t,A:o,N:a,NZ:c,S:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e&&"string"==typeof e?e:t},F:u,E:m,or:l,and:f,log:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];console.log(n),e.apply(void 0,n)}}},events:{on:A.on,off:A.off,emit:A.emit},checker:function(e){var t=e.instance,n=e.initialState,r=void 0===n?{}:n,o=e.intents,i=void 0===o?[]:o,a=e.reset,c=e.liveness,u=e.safety,s=e.options,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null},d=S(t),h=d.beginCheck,v=d.endCheck,g=s.depthMax,y=void 0===g?5:g,b=s.noDuplicateAction,w=void 0!==b&&b,_=s.doNotStartWith,A=void 0===_?[]:_,k=s.format,x=p(t({component:{actions:[function(e){return{__behavior:e}},function(e){return{__setFormatBehavior:e}}],acceptors:[function(e){return function(t){var n=t.__behavior;m(n)&&(e.__behavior=n)}},function(e){return function(t){var n=t.__setFormatBehavior;m(n)&&(e.__formatBehavior=n)}}]}}).intents,2),O=x[0],E=x[1];E(k);var N=[];return h((function(e){c&&c(e)&&(N.push({liveness:e.__behavior}),l(e.__behavior)),u&&u(e)&&(N.push({safety:e.__behavior}),f(e.__behavior))})),P(T(i,[],0,y,w,A),(function(){return a(r)}),O),v(),N}}}()})),cn=(an.createInstance,an.api),un=(an.doNotRender,an.addInitialState,an.addComponent,an.setRender,an.SAM),sn={items:[],displayActive:!1,displayCompleted:!1,displayAll:!0,getItems:function(){return this.items}},ln="http://localhost:3000",fn=function(){return fetch("".concat(ln,"/todos")).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))},dn=function(e){return fetch("".concat(ln,"/todos"),{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()}))},hn=function(e){return fetch("".concat(ln,"/todos/").concat(e.id),{method:"PUT",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()}))},pn=function(e){return fetch("".concat(ln,"/todos/").concat(e.id),{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()}))},vn=function(){return fn().then((function(e){return{apiItems:e.reduce((function(e,t){return e[t.id]=t,e}),{})}}))},mn=function(e){return{todo:e}},gn=function(e){return dn(e).then((function(e){return u({todoCreated:!0},e)}))},yn=function(e){return hn(e).then((function(e){return u({markingOneDone:!0},e)}))},bn=function(e){var t=Object.keys(e).map((function(t){return yn(e[t])}));return Promise.all(t).then((function(e){return{markingAllDone:!0}}))},wn=function(e){return pn(e).then((function(){return{deletingTodoDone:!0}}))},_n=function(e){var t=e.map(wn);return Promise.all(t).then((function(){return{deletingTodosDone:!0}}))},An=function(e,t){return{markOne:!0,id:e,checked:t}},kn=function(e){return{markAll:!0,checked:e}},xn=function(e){return{deleteTodo:!0,id:e}},On=function(){return{clearCompleted:!0}},En=function(){return{showActive:!0}},Nn=function(){return{showCompleted:!0}},jn=function(){return{showAll:!0}},Cn={header:{acceptors:[function(e){return function(t){if(t.todo)e.creatingTodo=!0,e.newTodo={title:t.todo,completed:!1};else if(t.todoCreated){var n=t.id,r=t.title,o=t.completed;e.items[n]={id:n,title:r,completed:o},e.creatingTodo=!1,e.newTodo=null}return e}}]},init:{acceptors:[function(e){return function(t){return t.apiItems&&(e.items=t.apiItems),e}}]},main:{acceptors:[function(e){return function(t){var n=e.getItems(),r=t.id,o=t.checked,i=t.markOne,a=t.markAll,c=t.deleteTodo,u=t.markingOneDone,s=t.markingAllDone,l=t.deletingTodoDone;return i&&r&&n[r]&&(n[r].completed=o,e.markingOne=!0,e.markedTodo=n[r]),u&&(e.markingOne=!1,e.markedTodo=null),a&&(Object.keys(n).forEach((function(e){n[e].completed=o})),e.markingAll=!0),s&&(e.markingAll=!1),r&&c&&Object.keys(n).forEach((function(t){n[t].id===r&&(e.deletingTodo=!0,e.deletedTodo=n[t],delete n[t])})),l&&(e.deletingTodo=!1,e.deletedTodo=null),e}}]},footer:{acceptors:[function(e){return function(t){var n=t.clearCompleted,r=t.showActive,o=t.showCompleted,i=t.showAll,a=t.deletingTodosDone,c=e.getItems();if(n){var u=[];Object.keys(c).forEach((function(e){c[e].completed&&u.push(c[e])})),e.deletingTodos=!0,e.deletedTodos=u}return r&&(e.displayActive=!0,e.displayCompleted=!1,e.displayAll=!1),o&&(e.displayActive=!1,e.displayCompleted=!0,e.displayAll=!1),i&&(e.displayAll=!0,e.displayActive=!1,e.displayCompleted=!1),a&&(Object.keys(c).forEach((function(e){c[e].completed&&delete c[e]})),e.deletingTodos=!1,e.deletedItems=null),e}}]},samApi:cn(un),setup:function(){this.samApi.addInitialState(sn),this.intents=function(e){e.addNAPs([function(e){return function(){return e.creatingTodo?(o(e.newTodo),!0):e.markingOne?(d(e.markedTodo),!0):e.markingAll?(h(e.items),!0):e.deletingTodo?(v(e.deletedTodo),!0):!!e.deletingTodos&&(m(e.deletedTodos),!0)}}]);var t=p(e.getIntents([vn,mn,gn,An,kn,xn,On,En,Nn,jn,yn,bn,wn,_n]).intents,14),n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],c=t[5],u=t[6],s=t[7],l=t[8],f=t[9],d=t[10],h=t[11],v=t[12],m=t[13];return{getAllTodos:n,createTodo:r,markDone:i,markAllDone:a,deleteTodo:c,clearCompleted:u,showActive:s,showCompleted:l,showAll:f}}(this.samApi),this.samApi.addComponent(this.header),this.samApi.addComponent(this.main),this.samApi.addComponent(this.init),this.samApi.addComponent(this.footer)},setRenderer:function(e){this.samApi.setRender(e)},start:function(){this.intents.getAllTodos()}};function Sn(){var e=h(["<Todo .data="," .intents="," />"]);return Sn=function(){return e},e}Cn.setup(),on=nn,("string"==typeof(rn="Todo")?Jt(rn,on,""):Jt(rn.name,rn,"")).Class;Cn.setRenderer((function(e){var t,n,r=document.querySelector("#todo-app");t=r,n=wt(Sn(),e,Cn.intents),at(t,"function"==typeof n?n:function(){return n})})),Cn.start()}();
